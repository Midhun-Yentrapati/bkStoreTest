<div class="prompt-overlay" (click)="onClose()">
  <div class="prompt-card" (click)="$event.stopPropagation()">
    <button class="close-button" (click)="onClose()" title="Close">
      <i class="icon icon-close"></i>
    </button>
    <h3 class="prompt-title">Welcome to BookVerse!</h3>
    <p class="prompt-subtitle">Log in to personalize your experience.</p>
    
    <!-- Success/Error Messages -->
    <div *ngIf="successMessage" class="message success-message">
      {{ successMessage }}
    </div>
    <div *ngIf="errorMessage" class="message error-message">
      {{ errorMessage }}
    </div>
    
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>
      <div class="form-group">
        <label for="prompt-identifier">Username or Mobile</label>
        <input 
          id="prompt-identifier" 
          type="text" 
          formControlName="identifier" 
          placeholder="Enter username or mobile"
          [ngClass]="{'error': loginForm.get('identifier')?.invalid && loginForm.get('identifier')?.touched, 'success': loginForm.get('identifier')?.valid && loginForm.get('identifier')?.touched}"
          maxlength="50" />
        <div *ngIf="loginForm.get('identifier')?.invalid && loginForm.get('identifier')?.touched" class="error-message">
          <div *ngIf="loginForm.get('identifier')?.errors?.['required']">Username or mobile is required.</div>
          <div *ngIf="loginForm.get('identifier')?.errors?.['minlength']">Username or mobile must be at least 3 characters.</div>
          <div *ngIf="loginForm.get('identifier')?.errors?.['pattern']">Please enter a valid username or mobile number.</div>
        </div>
      </div>
      
      <div class="form-group">
        <label for="prompt-password">Password</label>
        <input 
          id="prompt-password" 
          type="password" 
          formControlName="password" 
          placeholder="Enter your password"
          [ngClass]="{'error': loginForm.get('password')?.invalid && loginForm.get('password')?.touched, 'success': loginForm.get('password')?.valid && loginForm.get('password')?.touched}"
          maxlength="100" />
        <div *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched" class="error-message">
          <div *ngIf="loginForm.get('password')?.errors?.['required']">Password is required.</div>
          <div *ngIf="loginForm.get('password')?.errors?.['minlength']">Password must be at least 6 characters.</div>
        </div>
      </div>
      
      <div class="form-options">
        <a routerLink="/forgot-password" (click)="onClose()" class="forgot-password-link">Forgot Password?</a>
      </div>
      
      <button 
        type="submit" 
        class="auth-button" 
        [disabled]="loginForm.invalid || isLoading">
        <span *ngIf="!isLoading">Log In</span>
        <span *ngIf="isLoading">Logging In...</span>
      </button>
    </form>
    
    <div class="auth-switch">
      <span>New to BookVerse?</span>
      <a routerLink="/register" (click)="onClose()" class="switch-link">Sign Up</a>
    </div>
  </div>
</div>
