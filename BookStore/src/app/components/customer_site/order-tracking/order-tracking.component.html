<div class="container mt-4">
    <div class="row">
      <div class="col-12">
        <h2 class="mb-4">Order Details</h2>
      </div>
    </div>
  
    <ng-container *ngIf="order; else loadingOrError">
      <div class="card shadow-sm mb-4">
        <div class="card-header bg-primary text-white">
          <h5>Order #{{ order.id }}</h5>
        </div>
        <div class="card-body">
          <div class="row mb-3">
            <div class="col-md-6">
              <strong>Order Date:</strong> {{ order.orderDate | date:'medium' }}
            </div>
            <div class="col-md-6 text-md-end">
              <strong>Order Status:</strong>
                              <span class="badge ms-2" [ngClass]="getStatusBadgeClass(order.orderStatus)">
                  {{ getOrderStatusText(order.orderStatus) }}
                </span>
            </div>
          </div>
  
          <div class="row mb-3">
            <div class="col-md-6">
              <strong>Payment Method:</strong> {{ order.paymentMethod }}
            </div>
            <div class="col-md-6 text-md-end">
              <strong>Payment Status:</strong>
              <span class="badge ms-2" [ngClass]="getPaymentStatusBadgeClass(order.paymentStatus)">
                {{ order.paymentStatus }}
              </span>
            </div>
          </div>
  
          <div class="row mb-3">
            <div class="col-12">
              <strong>Delivery Address:</strong>
              <p class="mb-1">{{ order.shippingAddress.name }} - {{ order.shippingAddress.phone }}</p>
              <p class="mb-0 text-muted">
                {{ order.shippingAddress.address }}, {{ order.shippingAddress.locality }}, {{ order.shippingAddress.city }}, {{ order.shippingAddress.state }} - {{ order.shippingAddress.pincode }}
              </p>
                              <p class="mb-0 text-muted" *ngIf="order.shippingAddress.landmark">
                  Landmark: {{ order.shippingAddress.landmark }}
                </p>
            </div>
          </div>
  
          <h6 class="mb-3">Items:</h6>
          <ul class="list-group list-group-flush mb-4">
            <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let item of order.items">
              <div class="d-flex align-items-center">
                <img [src]="item.image_urls?.[0]" alt="{{ item.title }}" class="img-fluid order-item-img me-2 rounded">
                <div>
                  <strong>{{ item.title }}</strong>
                  <small class="text-muted d-block">by {{ item.author }}</small>
                  <small class="text-muted">Quantity: {{ item.quantity }}</small>
                </div>
              </div>
              <span class="fw-bold">₹{{ (item.price * item.quantity) | number:'1.2-2' }}</span>
            </li>
          </ul>
  
          <div class="row">
            <div class="col-md-6">
              <h5 class="d-flex justify-content-between align-items-center mb-4">
                Total Amount: <span class="text-primary">₹{{ order.totalAmount | number:'1.2-2' }}</span>
              </h5>
            </div>
            <div class="col-md-6">
              <h5 class="d-flex justify-content-between align-items-center mb-4">
                Platform Fee: <span class="text-secondary">₹{{ order.platformFee | number:'1.2-2' }}</span>
              </h5>
            </div>
          </div>
  
          <div class="row">
            <div class="col-12">
              <h4 class="d-flex justify-content-between align-items-center mb-4">
                Total Payable: <span class="text-primary fw-bold">₹{{ (order.totalAmount + order.platformFee) | number:'1.2-2' }}</span>
              </h4>
            </div>
          </div>
  
          <div class="d-grid">
            <button class="btn btn-outline-secondary" (click)="goBack()">
              <i class="bi bi-arrow-left me-2"></i> Back to Order History
            </button>
          </div>
        </div>
      </div>
    </ng-container>
  
    <ng-template #loadingOrError>
      <div class="alert alert-info text-center" role="alert">
        Loading order details or order not found...
      </div>
    </ng-template>
  </div>
  